<!DOCTYPE html>
<html lang="fr">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.29" />
  <meta name="author" content="Tak Castel">
  <meta name="description" content="Web developper">

  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="/css/highlight.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather%7CRoboto+Mono">
  <link rel="stylesheet" href="/css/hugo-academic.css">
  
  <link rel="stylesheet" href="/css/override.css">
  

  

  <link rel="alternate" href="http://localhost:50958/index.xml" type="application/rss+xml" title="Tak Castel">
  <link rel="feed" href="http://localhost:50958/index.xml" type="application/rss+xml" title="Tak Castel">

  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/apple-touch-icon.png">

  <link rel="canonical" href="http://localhost:50958/post/react-course/">

  

  <title>Créer une application reactJS  | Tak Castel</title>

</head>
<body id="top" data-spy="scroll" data-target="#navbar-main" data-offset="71">

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Ouvrir la barre de navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Tak Castel</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      <ul class="nav navbar-nav navbar-right">
        

        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Blog</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projets</span>
          </a>
        </li>

        
        

        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
          </a>
        </li>

        
        

        
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Créer une application reactJS </h1>
    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-10-13 00:00:00 &#43;0200 CEST" itemprop="datePublished">
      Oct 13, 2017
    </time>
  </span>

  
  
  
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/formation">formation</a
    >
    
  </span>
  
  

  
  
  
  <span class="article-tags">
    <i class="fa fa-tags"></i>
    
    <a href="/tags/cours">cours</a
    >, 
    
    <a href="/tags/react">react</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Cr%c3%a9er%20une%20application%20reactJS%20&amp;url=http%3a%2f%2flocalhost%3a50958%2fpost%2freact-course%2f"
         target="_blank">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=http%3a%2f%2flocalhost%3a50958%2fpost%2freact-course%2f"
         target="_blank">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a50958%2fpost%2freact-course%2f&amp;title=Cr%c3%a9er%20une%20application%20reactJS%20"
         target="_blank">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    <div class="article-style" itemprop="articleBody">
      <p>Cet article est un témoin du cours React sur le courselab.</p>

<p>Ensemble, nous allons apprendre à développer un petit projet pour prendre en main la librairie React de Javascript, développée par Facebook. Ce projet vous permettra d&rsquo;appréhender cette bibliothèque et en saisir tout son potentiel.</p>

<p>Pour vous apprendre à bien maîtriser React, je pense que le mieux est de vous accompagner pas à pas dans la création d&rsquo;un petit jeu de rôle par navigateur qui ne nécessitera pas de graphismes. Nous créerons un simple site à l&rsquo;image des livres d&rsquo;aventure que l&rsquo;on appelle les livres-jeux.</p>

<p>Les livres dont vous êtes le héros sont des aventures narratives dans lesquelles vous incarnez un personnage et avez généralement entre 2 à 6 choix à la fin de chaque paragraphe. Ces choix vous emmènent vers d&rsquo;autres paragraphes qui poursuivent l&rsquo;aventure vers de nouveaux chemins.</p>

<p>Si vous ne connaissez pas ce concept, je vous invite à lire l&rsquo;article wikipédia sur les <a href="https://fr.wikipedia.org/wiki/D%C3%A9fis_fantastiques" target="_blank">défis fantastiques</a>, une collection très célèbre des années 80, grâce à laquelle j&rsquo;ai eu l&rsquo;idée de réaliser cette petite application web.</p>

<p>L&rsquo;application démarre avec un fichier principal App.js :</p>

<pre><code>import React, { Component } from 'react'
import { BrowserRouter as Router, Route } from 'react-router-dom'
import { randomDice, saveCharacter, deleteCharacter } from './Services.js'
import Header from './Header.js'
import Game from './Game.js'
import Character from './Character.js'
import Home from './Home.js'
import './App.css'

class App extends Component {

/* ===========================================================
FONCTIONS DE CHARGEMENT DU PERSONNAGE
=========================================================== */

constructor(props) {
    super(props);
    this.state = {
    characterCreated: false, // Personnage créé ou pas
    name: '', // Nom du personnage
    tmpName: '', // Nom temporaire
    strenght: 0, // Force du personnage
    health: 0, // Santé du personnage
    chance: 0 // Chance du personnage
    }
}

// Chargement du personnage
componentDidMount() {
    const name = localStorage.getItem('name')
    const strenght = localStorage.getItem('strenght')
    const health = localStorage.getItem('health')

    if (name !== null &amp;&amp; strenght !== null &amp;&amp; health !== null) {
    this.setState({
        characterCreated: true,
        name, 
        strenght: parseInt(strenght, 10), 
        health: parseInt(health, 10),
        chance: parseInt(health, 10)
    })
    } 
}

/* ===========================================================
FONCTIONS DE CREATION DU PERSONNAGE
=========================================================== */

// Sauvegarde temporaire de l'entrée saisie dans l'input
handleChange(event) {
    this.setState({tmpName :event.target.value})
}

// Transfert de la valeur temporaire à la valeur finale
submitForm(event) {
    event.preventDefault()
    this.setState({name: this.state.tmpName})

    saveCharacter(this.state.tmpName, this.state.strenght, this.state.health, this.state.chance)
}

// Génération aléatoire des caractéristiques
createCharacter(event) {
    event.preventDefault()
    const strenght = randomDice(7,12)
    const health = randomDice(14,24)
    const chance = randomDice(7,12)

    this.setState({
    characterCreated: true,
    strenght: strenght,
    health: health,
    chance: chance
    })

    saveCharacter(this.state.name, strenght, health, chance)
}

/* ===========================================================
FONCTIONS DE SUPPRESSION DU PERSONNAGE
=========================================================== */

// Supprime les données du state et du local storage
restartGame() {
    this.setState({
    characterCreated: false,
    name: '',
    tmpName: '',
    strenght: 0,
    health: 0,
    chance: 0
    })

    deleteCharacter()
}

/* ===========================================================
AFFICHAGE DU COMPOSANT DANS LE DOM
=========================================================== */

render() {

    return (
    &lt;Router&gt;
        &lt;div&gt;
        &lt;Header
            restartGame={() =&gt; this.restartGame()}
        &gt;&lt;/Header&gt;
        &lt;Route 
            exact path=&quot;/&quot; 
            render = {() =&gt; (
            &lt;Home
                characterCreated = {this.state.characterCreated}
            &gt;&lt;/Home&gt;
            )}
        &gt;&lt;/Route&gt;
        &lt;Route 
            exact path=&quot;/game&quot; 
            render = {() =&gt; (
            &lt;Game
                name = {this.state.name}
                strenght = {this.state.strenght}
                health = {this.state.health}
                chance = {this.state.chance}
            &gt;&lt;/Game&gt;
            )}
        &gt;&lt;/Route&gt;
        &lt;Route 
            exact path=&quot;/character&quot; 
            render = {() =&gt; (
            &lt;Character
                characterCreated = {this.state.characterCreated}
                name = {this.state.name}
                tmpName = {this.state.tmpName}
                strenght = {this.state.strenght}
                health = {this.state.health}
                chance = {this.state.chance}
                handleChange = {(event) =&gt; this.handleChange(event)}
                submitForm = {(event) =&gt; this.submitForm(event)}
                createCharacter = {(event) =&gt; this.createCharacter(event)}
            &gt;&lt;/Character&gt;
            )}
        &gt;&lt;/Route&gt;
        &lt;/div&gt;
    &lt;/Router&gt;
    );
}

}

export default App;
</code></pre>

<p>Puis un fichier Character.js :</p>

<pre><code>import React, { Component } from 'react'
import { Link } from 'react-router-dom'

class Character extends Component {

constructor(props) {
    super(props);
    this.state = {
    submitted: false, // Indique si on a validé le nom
    };
}

// Renvoie un message d'erreur s'il n'y a pas de nom renseigné
getWarning() {
    if (this.state.submitted &amp;&amp; this.props.name === '') {
    return (
        &lt;p&gt; Vous devez renseigner un nom !&lt;/p&gt;
    )
    }
}

// Affiche le formulaire de génération des caracs une fois le nom renseigné
getCarac() {
    if (this.state.submitted &amp;&amp; this.props.name !== '')
    return (
    &lt;div&gt;
        &lt;p&gt;Attribuer de nouvelles caractéristiques :&lt;/p&gt;
        &lt;button
        className=&quot;App-btn&quot;
        onClick={(event) =&gt; this.props.createCharacter(event)}&gt;
        Générer
        &lt;/button&gt;
        &lt;p&gt;Force : {this.props.strenght}&lt;/p&gt;
        &lt;p&gt;Santé : {this.props.health}&lt;/p&gt;
        &lt;p&gt;Chance : {this.props.chance}&lt;/p&gt;
    &lt;/div&gt;
    )
}

// Affiche un lien vers le jeu une fois le personnage créé
getPlay() {
    if (this.props.characterCreated === true &amp;&amp; this.state.submitted === true) {
    return (
        &lt;Link className=&quot;App-btn&quot; to={'/game'}&gt;Jouer&lt;/Link&gt;
    )
    }
}

submitName(event) {
    this.props.submitForm(event)
    this.setState({submitted: true})
}

render() {
    return (
    &lt;div className=&quot;App&quot;&gt;
        &lt;form
        className=&quot;App-form&quot;&gt;
        &lt;div className=&quot;App-form-group&quot;&gt;
            &lt;label htmlFor=&quot;name&quot;&gt;Nom du personnage :&lt;/label&gt;
            &lt;input 
            htmlFor=&quot;name&quot;
            id=&quot;name&quot; 
            type=&quot;text&quot; 
            value={this.props.tmpName}
            onChange={(event) =&gt; this.props.handleChange(event)}
            placeholder=&quot;John Doe&quot;
            /&gt;
            &lt;button
            className=&quot;App-btn&quot;
            onClick={(event) =&gt; this.submitName(event)}&gt;
            Nommer
            &lt;/button&gt;
            {this.getWarning()}
            {this.getCarac()}
            {this.getPlay()}            
        &lt;/div&gt;
        &lt;/form&gt; 
    &lt;/div&gt;
    );
}

}

export default Character;
</code></pre>

<p>Et enfin 3 fichiers à part que sont le jeu dans Game.js :</p>

<pre><code>import React, { Component } from 'react'
import Stats from './Stats.js'

class Game extends Component {

render () {
    return (
    &lt;div&gt;
        &lt;Stats
        name = {this.props.name}
        strenght = {this.props.strenght}
        health = {this.props.health}
        chance = {this.props.chance}&gt;
        &lt;/Stats&gt;
    &lt;/div&gt;
    )
}

}

export default Game;
</code></pre>

<p>Les statistqiues du personnage dans Stats.js</p>

<pre><code>import React, { Component } from 'react'

class Stats extends Component {

render () {
    return (
    &lt;ul&gt;
        &lt;li&gt;Nom : {this.props.name}&lt;/li&gt;
        &lt;li&gt;Force : {this.props.strenght}&lt;/li&gt;
        &lt;li&gt;Santé : {this.props.health}&lt;/li&gt;
        &lt;li&gt;Chance : {this.props.chance}&lt;/li&gt;
    &lt;/ul&gt;
    )
}

}

export default Stats;
</code></pre>

<p>Et enfin des services externes (ici des fonctions utiles à la création aléatoire du personnage) dans Services.js :</p>

<pre><code>// Renvoie un entier aléatoire
// entre une valeur min (incluse)
// et une valeur max (incluse)
export function randomDice(min, max) {
min = Math.ceil(min)
max = Math.floor(max)
return Math.floor(Math.random() * (max - min +1)) + min
}

// Stock les données dans le navigateur
export function saveCharacter(name, strenght, health, chance) {
localStorage.setItem('name', name)
localStorage.setItem('strenght', strenght)
localStorage.setItem('health', health)
localStorage.setItem('chance', chance)
}

// Enlève les données du navigateur
export function deleteCharacter() { 
localStorage.clear()
}
</code></pre>

    </div>
  </div>

</article>




<div class="container">
  <nav>
  <ul class="pager">
    

    
  </ul>
</nav>

</div>

<div class="article-container">
  
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "takcastel." + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2017 TakCastel &middot; 

      Powered by the <a href="https://github.com/gcushen/hugo-academic" target="_blank">Academic
      theme</a> for <a href="http://gohugo.io" target="_blank">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js" integrity="sha512-jGsMH83oKe9asCpkOVkBnUrDDTp8wl+adkB2D+//JtlxO4SrLoJdhbOysIFQJloQFD+C4Fl1rMsQZF76JjV0eQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.2/imagesloaded.pkgd.min.js" integrity="sha512-iHzEu7GbSc705hE2skyH6/AlTpOfBmkx7nUqTLGzPYR+C1tRaItbRlJ7hT/D3YQ9SV0fqLKzp4XY9wKulTBGTw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/TweenMax.min.js" integrity="sha512-Z5heTz36xTemt1TbtbfXtTq5lMfYnOkXM2/eWcTTiLU01+Sw4ku1i7vScDc8fWhrP2abz9GQzgKH5NGBLoYlAw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.1/plugins/ScrollToPlugin.min.js" integrity="sha512-CDeU7pRtkPX6XJtF/gcFWlEwyaX7mcAp5sO3VIu/ylsdR74wEw4wmBpD5yYTrmMAiAboi9thyBUr1vXRPA7t0Q==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  <script data-no-instant>document.write('<script src="/livereload.js?port=50958&mindelay=10"></' + 'script>')</script></body>
</html>

